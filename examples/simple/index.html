<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.light_blue-orange.min.css">
  <script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>
  <link rel="stylesheet" href="https://cdn.rawgit.com/CreativeIT/getmdl-select/master/getmdl-select.min.css">
 <script defer src="https://cdn.rawgit.com/CreativeIT/getmdl-select/master/getmdl-select.min.js"></script>
  <title>RemoteMonster Simple Example</title>

  <style>
    video#remoteVideo { width:100%; height: 80%; background-color: black; }
    button#connectChannelButton { position:absolute; overflow:visible; left:50%; top:60px; }
    html,body{ height:100%; }
  </style>

  <script src="http://localhost:8080/dist/remon.js"></script>
  <script>
  let isConnected = false;

  const config = {
    credential: {
      key: '1234567890',
      serviceId: 'SERVICEID1'
    },
    view: {
      remote: '#remoteVideo'
    }
  };
const rtcListener = {
  onInit(token) { console.log(`EVENT FIRED : onInit: ${token}`); },
  onCreateChannel(channelId) {
    console.log(`EVENT FIRED : onCreateChannel: ${channelId}`);
  },
  onConnectChannel(channelId) { console.log(`EVENT FIRED : onConnectChannel ${channelId}`); },
  onComplete() { console.log('EVENT FIRED : onComplete'); },
  onAddLocalStream(stream) { console.log(`EVENT FIRED : onAddLocalStream: ${stream}`); },
  onStateChange(state) { console.log(`EVENT FIRED : onStateChange: ${state}`); },
  onDisconnectChannel() { console.log('EVENT FIRED : onDisconnectChannel'); },
  onError(error) { console.log(`EVENT FIRED : onError: ${error}`); },
  onStat(result){
  },
  onSearch(result){
  }
}
  const remon = new Remon({config: config, listener: rtcListener});
  function start(){
    if (isConnected === false){
      isConnected = true;
      document.getElementById('connectChannelButton').innerHTML = 'Close';
      remon.connectChannel('simpleRemon');
    } else {
      isConnected = false;
      document.getElementById('connectChannelButton').innerHTML = "Connect";
      remon.disconnect();
    }
  }
  </script>
</head>
<body>
  <div class="mdl-layout mdl-js-layout mdl-layout--fixed-header">
    <header class="mdl-layout__header">
      <div class="mdl-layout__header-row">
        <!-- Title -->
        <span class="mdl-layout-title" id="appTitle">Full-featured</span>
        <!-- Add spacer, to align navigation to the right -->
        <div class="mdl-layout-spacer"></div>
        <!-- Navigation. We hide it in small screens. -->
        <nav class="mdl-navigation">
          <a class="mdl-navigation__link" href="javascript:log_popup();">Log</a>
          <a class="mdl-navigation__link" href="javascript:setup_popup();">Setup</a>
        </nav>

      </div>
    </header>
    <div class="mdl-layout__drawer">
      <span class="mdl-layout-title">RemoteMonster examples</span>
      <nav class="mdl-navigation">
        <a class="mdl-navigation__link" href="">Link</a>
        <a class="mdl-navigation__link" href="">Link</a>
      </nav>
      <hr>
      <nav class="mdl-navigation">
        <a class="mdl-navigation__link" href="javascript:setup_popup();">Setup</a>
        <a class="mdl-navigation__link" href="javascript:log_popup();">Log</a>
      </nav>
    </div>
    <main>
      <video id="remoteVideo" autoplay controls class="video"></video>
      <button id="connectChannelButton" class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent" onclick="start();">Connect</button>
    </main>
  </div>
</body>
</html>
